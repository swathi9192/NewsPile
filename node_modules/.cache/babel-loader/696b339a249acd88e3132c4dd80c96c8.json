{"ast":null,"code":"import _regeneratorRuntime from\"/Users/SKU716/Desktop/newspile/newspile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/SKU716/Desktop/newspile/newspile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/SKU716/Desktop/newspile/newspile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/SKU716/Desktop/newspile/newspile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/SKU716/Desktop/newspile/newspile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/SKU716/Desktop/newspile/newspile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import API from\"../../api\";var Home=/*#__PURE__*/function(_React$Component){_inherits(Home,_React$Component);var _super=_createSuper(Home);function Home(){var _this;_classCallCheck(this,Home);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={searchValue:\"\",searchData:[]};_this.searchResultsMapper=function(data){console.log(data);_this.setState({searchData:data.filter(function(_ref){var abstract=_ref.abstract,headline=_ref.headline;return abstract!==\"\"&&headline!==\"\";}).map(function(_ref2){var abstract=_ref2.abstract,headline=_ref2.headline,web_url=_ref2.web_url,_id=_ref2._id;var idIndex=_id.lastIndexOf(\"/\");var key=_id.substring(idIndex+1);return/*#__PURE__*/React.createElement(\"div\",{className:\"tile is-3 is-parent \",key:key},/*#__PURE__*/React.createElement(\"div\",{className:\"tile is-child box\"},/*#__PURE__*/React.createElement(\"div\",{style:{height:\"260px\",overflow:\"hidden\"}},/*#__PURE__*/React.createElement(\"p\",{className:\"title\"},headline.print_headline?headline.print_headline:headline.main),/*#__PURE__*/React.createElement(\"p\",null,abstract)),/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:\"10px\"}},/*#__PURE__*/React.createElement(\"a\",{href:web_url,target:\"_blank\"},\"Read the article\"))));})});};_this.handleBtnClick=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(_this.state.searchValue===\"\")){_context.next=4;break;}_this.handleOnLoad();_context.next=8;break;case 4:_context.next=6;return API.get(\"search/v2/articlesearch.json?q=\".concat(_this.state.searchValue));case 6:response=_context.sent;_this.searchResultsMapper(response.data.response.docs);case 8:case\"end\":return _context.stop();}}},_callee);}));_this.handleOnLoad=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,results,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return API.get(\"mostpopular/v2/viewed/1.json\");case 2:response=_context2.sent;results=response.data.results;data=results.map(function(result){return{abstract:result.abstract,headline:{print_headline:result.title},web_url:result.url,_id:result.uri};});_this.searchResultsMapper(data);case 6:case\"end\":return _context2.stop();}}},_callee2);}));_this.handleKeyPress=function(e){if(e.key===\"Enter\"){_this.handleBtnClick();}};return _this;}_createClass(Home,[{key:\"componentDidMount\",value:function componentDidMount(){this.handleOnLoad();}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"section\",{className:\"section is-light homeCmpnt\"},/*#__PURE__*/React.createElement(\"div\",{className:\"field is-grouped\",style:{width:\"50%\",margin:\"20px auto\"}},/*#__PURE__*/React.createElement(\"p\",{className:\"control is-expanded\"},/*#__PURE__*/React.createElement(\"input\",{className:\"input\",type:\"text\",value:this.state.searchValue,onChange:function onChange(e){return _this2.setState({searchValue:e.target.value});},onKeyPress:this.handleKeyPress,placeholder:\"Search an article\"})),/*#__PURE__*/React.createElement(\"p\",{className:\"control\"},/*#__PURE__*/React.createElement(\"a\",{className:\"button is-info\",onClick:this.handleBtnClick},\"Search\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"tile is-ancestor\",style:{flexWrap:\"wrap\",justifyContent:\"center\"}},this.state.searchData));}}]);return Home;}(React.Component);export default Home;","map":{"version":3,"sources":["/Users/SKU716/Desktop/newspile/newspile/src/components/Home/Home.js"],"names":["React","API","Home","state","searchValue","searchData","searchResultsMapper","data","console","log","setState","filter","abstract","headline","map","web_url","_id","idIndex","lastIndexOf","key","substring","height","overflow","print_headline","main","marginTop","handleBtnClick","handleOnLoad","get","response","docs","results","result","title","url","uri","handleKeyPress","e","width","margin","target","value","flexWrap","justifyContent","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport API from \"../../api\";\n\nclass Home extends React.Component {\n  state = {\n    searchValue: \"\",\n    searchData: [],\n  };\n  searchResultsMapper = (data) => {\n    console.log(data);\n    this.setState({\n      searchData: data\n        .filter(({ abstract, headline }) => {\n          return abstract !== \"\" && headline !== \"\";\n        })\n        .map(({ abstract, headline, web_url, _id }) => {\n          const idIndex = _id.lastIndexOf(\"/\");\n          const key = _id.substring(idIndex + 1);\n          return (\n            <div className=\"tile is-3 is-parent \" key={key}>\n              <div className=\"tile is-child box\">\n                <div style={{ height: \"260px\", overflow: \"hidden\" }}>\n                  <p className=\"title\">\n                    {headline.print_headline\n                      ? headline.print_headline\n                      : headline.main}\n                  </p>\n                  <p>{abstract}</p>\n                </div>\n                <div style={{ marginTop: \"10px\" }}>\n                  <a href={web_url} target=\"_blank\">\n                    Read the article\n                  </a>\n                </div>\n              </div>\n            </div>\n          );\n        }),\n    });\n  };\n  handleBtnClick = async () => {\n    if (this.state.searchValue === \"\") this.handleOnLoad();\n    else {\n      const response = await API.get(\n        `search/v2/articlesearch.json?q=${this.state.searchValue}`\n      );\n\n      this.searchResultsMapper(response.data.response.docs);\n    }\n  };\n\n  handleOnLoad = async () => {\n    const response = await API.get(`mostpopular/v2/viewed/1.json`);\n    const results = response.data.results;\n    const data = results.map((result) => {\n      return {\n        abstract: result.abstract,\n        headline: { print_headline: result.title },\n        web_url: result.url,\n        _id: result.uri,\n      };\n    });\n    this.searchResultsMapper(data);\n  };\n\n  handleKeyPress = (e) => {\n    if (e.key === \"Enter\") {\n      this.handleBtnClick();\n    }\n  };\n  componentDidMount() {\n    this.handleOnLoad();\n  }\n  render() {\n    return (\n      <section className=\"section is-light homeCmpnt\">\n        <div\n          className=\"field is-grouped\"\n          style={{ width: \"50%\", margin: \"20px auto\" }}\n        >\n          <p className=\"control is-expanded\">\n            <input\n              className=\"input\"\n              type=\"text\"\n              value={this.state.searchValue}\n              onChange={(e) => this.setState({ searchValue: e.target.value })}\n              onKeyPress={this.handleKeyPress}\n              placeholder=\"Search an article\"\n            />\n          </p>\n          <p className=\"control\">\n            <a className=\"button is-info\" onClick={this.handleBtnClick}>\n              Search\n            </a>\n          </p>\n        </div>\n        <div\n          className=\"tile is-ancestor\"\n          style={{ flexWrap: \"wrap\", justifyContent: \"center\" }}\n        >\n          {this.state.searchData}\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}